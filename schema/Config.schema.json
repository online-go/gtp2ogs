{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$ref": "#/definitions/Config",
    "definitions": {
        "Config": {
            "type": "object",
            "properties": {
                "apikey": {
                    "type": "string",
                    "description": "API key for the bot."
                },
                "verbosity": {
                    "type": "number",
                    "description": "Enable verbose logging.",
                    "default": 0
                },
                "server": {
                    "type": "string",
                    "description": "Server URL to connect to, defaults to online-go.com",
                    "default": "https://online-go.com"
                },
                "max_pause_time": {
                    "type": "number",
                    "description": "Maximum time to allow the game to be paused for in seconds.",
                    "default": 300
                },
                "blacklist": {
                    "type": "array",
                    "items": {
                        "type": [
                            "number",
                            "string"
                        ]
                    },
                    "description": "Players who are not allowed to play the bot ever."
                },
                "whitelist": {
                    "type": "array",
                    "items": {
                        "type": [
                            "number",
                            "string"
                        ]
                    },
                    "description": "Players who are allowed to challenge the bot with any settings even when the bot is at the maximum number of simultaneous games"
                },
                "bot": {
                    "$ref": "#/definitions/BotConfig",
                    "description": "Config for how to run your bot"
                },
                "greeting": {
                    "$ref": "#/definitions/TranslatableString",
                    "description": "Message to send to your opponent at the start of the game"
                },
                "farewell": {
                    "$ref": "#/definitions/TranslatableString"
                },
                "resign_bot": {
                    "$ref": "#/definitions/BotConfig"
                },
                "opening_bot": {
                    "$ref": "#/definitions/BotConfig"
                },
                "farewellscore": {
                    "type": "boolean",
                    "description": "Send a message saying what the bot thought the score was at the end of the game"
                },
                "logfile": {
                    "type": "string",
                    "description": "File to write logs to. Logs will be sent to stdout as well."
                },
                "allowed_time_control_systems": {
                    "type": "array",
                    "items": {
                        "type": "string",
                        "enum": [
                            "fischer",
                            "byoyomi",
                            "simple"
                        ]
                    },
                    "description": "Time control systems that we can work with",
                    "default": [
                        "fischer",
                        "byoyomi",
                        "simple"
                    ],
                    "minItems": 1
                },
                "allowed_blitz_settings": {
                    "anyOf": [
                        {
                            "type": "null"
                        },
                        {
                            "$ref": "#/definitions/TimeControlRanges"
                        }
                    ],
                    "description": "Allowed blitz times for the bot. Blitz is disabled by default, but you can enable it by providing accetpable time settings.",
                    "default": null
                },
                "allowed_live_settings": {
                    "anyOf": [
                        {
                            "type": "null"
                        },
                        {
                            "$ref": "#/definitions/TimeControlRanges"
                        }
                    ],
                    "description": "Allowed live game times for bot.",
                    "default": {
                        "per_move_time_range": [
                            10,
                            300
                        ],
                        "main_time_range": [
                            0,
                            3600
                        ],
                        "periods_range": [
                            1,
                            10
                        ]
                    }
                },
                "allowed_correspondence_settings": {
                    "anyOf": [
                        {
                            "type": "null"
                        },
                        {
                            "$ref": "#/definitions/TimeControlRanges"
                        }
                    ],
                    "description": "Allowed correspondence game times for bot.",
                    "default": {
                        "per_move_time_range": [
                            43200,
                            259200
                        ],
                        "main_time_range": [
                            0,
                            86400
                        ],
                        "periods_range": [
                            1,
                            10
                        ]
                    }
                },
                "allowed_board_sizes": {
                    "anyOf": [
                        {
                            "type": "array",
                            "items": {
                                "type": "number"
                            }
                        },
                        {
                            "type": "number"
                        },
                        {
                            "type": "string",
                            "const": "all"
                        },
                        {
                            "type": "string",
                            "const": "square"
                        }
                    ],
                    "description": "Allowed board sizes for the bot. If there are no restrictions, you can provide \"all\", or if you can play on any square board, you can provide \"square\".",
                    "default": [
                        9,
                        13,
                        19
                    ]
                },
                "allow_unranked": {
                    "type": "boolean",
                    "description": "Allowed unranked games",
                    "default": true
                },
                "allowed_rank_range": {
                    "type": "number",
                    "description": "+- the number of ranks allowed to play against this bot. Note that ranked games are always limited to +-9. 0 to disable rank restrictions.",
                    "default": 0
                },
                "allow_handicap": {
                    "type": "boolean",
                    "description": "Allow handicap games",
                    "default": true
                },
                "min_rank": {
                    "type": "number",
                    "description": "Minimum rank to accept games from",
                    "default": 0,
                    "minimum": 0,
                    "maximum": 35
                },
                "hidden": {
                    "type": "boolean",
                    "description": "Hide the bot from the public bot list",
                    "default": false
                },
                "showboard": {
                    "type": "boolean",
                    "description": "Used for debugging, will issue a showboard command when we've loaded the board state into the bot",
                    "default": false
                },
                "min_move_time": {
                    "type": "number",
                    "description": "If set, bot moves will be delayed when made before `min_move_time` ms. This is primarily a user experience thing as can make players feel rushed if the bots are responding too quickly.",
                    "default": 1500
                }
            },
            "required": [
                "apikey"
            ],
            "additionalProperties": false,
            "description": "Bot config"
        },
        "BotConfig": {
            "type": "object",
            "properties": {
                "command": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "instances": {
                    "type": "number",
                    "description": "Number of instances of the bot to run in parallel. Exactly this many instances will be run at any given time, regardless of how many ongoing games there are.",
                    "default": 1
                },
                "enable_clock": {
                    "type": "boolean",
                    "description": "Enabled clocks being sent to the bot. Clocks will only be sent when the applicable clock commands are detected from the bot anyways, so this is generally fine to leave turned on.",
                    "default": true
                },
                "send_chats": {
                    "type": "boolean"
                },
                "send_pv_data": {
                    "type": "boolean",
                    "description": "Send the principal variation (PV) values. Note that your bot must output this data in a way that can be parsed.\n\nSee `pv_format` for more details on formatting and parsing PV values .",
                    "default": true
                },
                "release_delay": {
                    "type": "number",
                    "description": "After a bot makes a move, some bots will continue writing to stderr relevant information (such as chats or PV data). This option controls how long we wait for the bot to finish writing to stderr before we release the bot back into the pool of available bots.",
                    "default": 100
                }
            },
            "required": [
                "command",
                "release_delay"
            ],
            "additionalProperties": false,
            "description": "Bot config"
        },
        "TranslatableString": {
            "type": "object",
            "properties": {
                "en": {
                    "type": "string"
                }
            },
            "required": [
                "en"
            ],
            "additionalProperties": {
                "type": "string"
            }
        },
        "TimeControlRanges": {
            "type": "object",
            "properties": {
                "per_move_time_range": {
                    "type": "array",
                    "items": {
                        "type": "number"
                    },
                    "minItems": 2,
                    "maxItems": 2,
                    "description": "Range of acceptable times per move. This is:   - The period time in byo-yomi   - The time increment and minimum move time in Fischer   - The time per move in simple time",
                    "default": "[10, 300] for live, [43200, 259200] for correspondence"
                },
                "main_time_range": {
                    "type": "array",
                    "items": {
                        "type": "number"
                    },
                    "minItems": 2,
                    "maxItems": 2,
                    "description": "Range of acceptable main times in seconds. This is only applicable for byo-yomi",
                    "default": "[0, 3600] for live games, [0, 86400] for correspondence games"
                },
                "periods_range": {
                    "type": "array",
                    "items": {
                        "type": "number"
                    },
                    "minItems": 2,
                    "maxItems": 2,
                    "description": "Range of acceptable number of periods. This is only applicable for byo-yomi",
                    "default": [
                        1,
                        10
                    ]
                }
            },
            "required": [
                "per_move_time_range",
                "main_time_range",
                "periods_range"
            ],
            "additionalProperties": false
        }
    }
}
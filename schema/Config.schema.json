{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$ref": "#/definitions/Config",
    "definitions": {
        "Config": {
            "type": "object",
            "properties": {
                "apikey": {
                    "type": "string",
                    "description": "API key for the bot."
                },
                "verbosity": {
                    "type": "number",
                    "description": "Enable verbose logging.",
                    "default": 0
                },
                "disable_status_updates": {
                    "type": "boolean",
                    "description": "Disable the periodic status update lines printed to the console and log file",
                    "default": false
                },
                "server": {
                    "type": "string",
                    "description": "Server URL to connect to, defaults to online-go.com",
                    "default": "https://online-go.com"
                },
                "max_pause_time": {
                    "type": "number",
                    "description": "Maximum time to allow the game to be paused for in seconds.",
                    "default": 300
                },
                "blacklist": {
                    "type": "array",
                    "items": {
                        "type": [
                            "number",
                            "string"
                        ]
                    },
                    "description": "Players who are not allowed to play the bot ever."
                },
                "whitelist": {
                    "type": "array",
                    "items": {
                        "type": [
                            "number",
                            "string"
                        ]
                    },
                    "description": "Players who are allowed to challenge the bot with any settings even when the bot is at the maximum number of simultaneous games"
                },
                "bot": {
                    "$ref": "#/definitions/BotConfig",
                    "description": "Config for how to run your bot"
                },
                "opening_bot": {
                    "$ref": "#/definitions/OpeningBotConfig",
                    "description": "Bot to use for playing opening moves. This can be useful for ensuring your bot plays at least a few reasonable joseki moves if it is a weak bot."
                },
                "ending_bot": {
                    "$ref": "#/definitions/EndingBotConfig",
                    "description": "Secondary bot to use for ensuring your real bot passes or resigns appropriately. This bot will be consulted every move after . If the move it returns is a pass it will override the move your bot has made (unless your bot is resigning). If the move it returns is a resign, it will count the number of successive resigns and if it is more than the number of allowed resigns you've set in this config (default of 3), it will override your bot's move with a resign."
                },
                "greeting": {
                    "$ref": "#/definitions/TranslatableString",
                    "description": "Message to send to the player at the start of the game"
                },
                "farewell": {
                    "$ref": "#/definitions/TranslatableString",
                    "description": "Message to send to the player when the game is over"
                },
                "farewellscore": {
                    "type": "boolean",
                    "description": "Send a message saying what the bot thought the score was at the end of the game"
                },
                "logfile": {
                    "type": "string",
                    "description": "File to write logs to. Logs will be sent to stdout as well."
                },
                "allowed_time_control_systems": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/BotTimeControlSystems"
                    },
                    "description": "Time control systems that we can work with",
                    "default": [
                        "fischer",
                        "byoyomi",
                        "simple"
                    ],
                    "minItems": 1
                },
                "allowed_blitz_settings": {
                    "anyOf": [
                        {
                            "type": "null"
                        },
                        {
                            "$ref": "#/definitions/TimeControlRanges"
                        }
                    ],
                    "description": "Allowed blitz times for the bot. Blitz is disabled by default, but you can enable it by providing accetpable time settings.",
                    "default": null
                },
                "allowed_live_settings": {
                    "anyOf": [
                        {
                            "type": "null"
                        },
                        {
                            "$ref": "#/definitions/TimeControlRanges"
                        }
                    ],
                    "description": "Allowed live game times for bot.",
                    "default": {
                        "per_move_time_range": [
                            10,
                            300
                        ],
                        "main_time_range": [
                            0,
                            3600
                        ],
                        "periods_range": [
                            1,
                            10
                        ]
                    }
                },
                "allowed_correspondence_settings": {
                    "anyOf": [
                        {
                            "type": "null"
                        },
                        {
                            "$ref": "#/definitions/TimeControlRanges"
                        }
                    ],
                    "description": "Allowed correspondence game times for bot.",
                    "default": {
                        "per_move_time_range": [
                            43200,
                            259200
                        ],
                        "main_time_range": [
                            0,
                            86400
                        ],
                        "periods_range": [
                            1,
                            10
                        ]
                    }
                },
                "allowed_board_sizes": {
                    "anyOf": [
                        {
                            "type": "array",
                            "items": {
                                "type": "number"
                            }
                        },
                        {
                            "type": "number"
                        },
                        {
                            "type": "string",
                            "const": "all"
                        },
                        {
                            "type": "string",
                            "const": "square"
                        }
                    ],
                    "description": "Allowed board sizes for the bot. If there are no restrictions, you can provide \"all\", or if you can play on any square board, you can provide \"square\".",
                    "default": [
                        9,
                        13,
                        19
                    ]
                },
                "allow_unranked": {
                    "type": "boolean",
                    "description": "Allowed unranked games",
                    "default": true
                },
                "allowed_rank_range": {
                    "type": "number",
                    "description": "+- the number of ranks allowed to play against this bot. Note that ranked games are always limited to +-9. 0 to disable rank restrictions.",
                    "default": 0
                },
                "allow_handicap": {
                    "type": "boolean",
                    "description": "Allow handicap games",
                    "default": true
                },
                "min_rank": {
                    "type": "number",
                    "description": "Minimum rank to accept games from",
                    "default": 0,
                    "minimum": 0,
                    "maximum": 35
                },
                "hidden": {
                    "type": "boolean",
                    "description": "Hide the bot from the public bot list",
                    "default": false
                },
                "showboard": {
                    "type": "boolean",
                    "description": "Used for debugging, will issue a showboard command when we've loaded the board state into the bot",
                    "default": false
                },
                "min_move_time": {
                    "type": "number",
                    "description": "If set, bot moves will be delayed when made before `min_move_time` ms. This is primarily a user experience thing as can make players feel rushed if the bots are responding too quickly.",
                    "default": 1500
                }
            },
            "required": [
                "apikey"
            ],
            "additionalProperties": false,
            "description": "Bot config"
        },
        "BotConfig": {
            "type": "object",
            "properties": {
                "command": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "instances": {
                    "type": "number",
                    "description": "Number of instances of the bot to run in parallel. Exactly this many instances will be run at any given time, regardless of how many ongoing games there are.",
                    "default": 1
                },
                "enable_clock": {
                    "type": "boolean",
                    "description": "Enabled clocks being sent to the bot. Clocks will only be sent when the applicable clock commands are detected from the bot anyways, so this is generally fine to leave turned on.",
                    "default": true
                },
                "send_chats": {
                    "type": "boolean"
                },
                "send_pv_data": {
                    "type": "boolean",
                    "description": "Send the principal variation (PV) values. Note that your bot must output this data in a way that can be parsed.\n\nSee `pv_format` for more details on formatting and parsing PV values .",
                    "default": true
                },
                "release_delay": {
                    "type": "number",
                    "description": "After a bot makes a move, some bots will continue writing to stderr relevant information (such as chats or PV data). This option controls how long we wait for the bot to finish writing to stderr before we release the bot back into the pool of available bots.",
                    "default": 100
                }
            },
            "required": [
                "command",
                "release_delay"
            ],
            "additionalProperties": false,
            "description": "Bot config"
        },
        "OpeningBotConfig": {
            "type": "object",
            "properties": {
                "command": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "instances": {
                    "type": "number",
                    "description": "Number of instances of the bot to run in parallel. Exactly this many instances will be run at any given time, regardless of how many ongoing games there are.",
                    "default": 1
                },
                "enable_clock": {
                    "type": "boolean",
                    "description": "Enabled clocks being sent to the bot. Clocks will only be sent when the applicable clock commands are detected from the bot anyways, so this is generally fine to leave turned on.",
                    "default": true
                },
                "send_chats": {
                    "type": "boolean"
                },
                "send_pv_data": {
                    "type": "boolean",
                    "description": "Send the principal variation (PV) values. Note that your bot must output this data in a way that can be parsed.\n\nSee `pv_format` for more details on formatting and parsing PV values .",
                    "default": true
                },
                "release_delay": {
                    "type": "number",
                    "description": "After a bot makes a move, some bots will continue writing to stderr relevant information (such as chats or PV data). This option controls how long we wait for the bot to finish writing to stderr before we release the bot back into the pool of available bots.",
                    "default": 100
                },
                "number_of_opening_moves_to_play": {
                    "type": "number",
                    "description": "Number of opening moves to play before switching to the main bot.",
                    "default": 8
                }
            },
            "additionalProperties": false,
            "required": [
                "command",
                "release_delay"
            ]
        },
        "EndingBotConfig": {
            "type": "object",
            "properties": {
                "command": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "instances": {
                    "type": "number",
                    "description": "Number of instances of the bot to run in parallel. Exactly this many instances will be run at any given time, regardless of how many ongoing games there are.",
                    "default": 1
                },
                "enable_clock": {
                    "type": "boolean",
                    "description": "Enabled clocks being sent to the bot. Clocks will only be sent when the applicable clock commands are detected from the bot anyways, so this is generally fine to leave turned on.",
                    "default": true
                },
                "send_chats": {
                    "type": "boolean"
                },
                "send_pv_data": {
                    "type": "boolean",
                    "description": "Send the principal variation (PV) values. Note that your bot must output this data in a way that can be parsed.\n\nSee `pv_format` for more details on formatting and parsing PV values .",
                    "default": true
                },
                "release_delay": {
                    "type": "number",
                    "description": "After a bot makes a move, some bots will continue writing to stderr relevant information (such as chats or PV data). This option controls how long we wait for the bot to finish writing to stderr before we release the bot back into the pool of available bots.",
                    "default": 100
                },
                "allowed_resigns": {
                    "type": "number",
                    "description": "Number of successive resigns allowed before the bot will resign.",
                    "default": 3
                },
                "moves_to_allow_before_checking_ratio": {
                    "type": "number",
                    "description": "This is the ratio of the board size to the number of moves to allow before we will start checking the ending bot for passes and resigns. This is to prevent the bot from resigning too early in a game.\n\nThe move to start consulting the ending bot is calculated by taking\n\n  ceil(board_height * board_width * ratio)",
                    "default": 0.8
                }
            },
            "additionalProperties": false,
            "required": [
                "command",
                "release_delay"
            ]
        },
        "TranslatableString": {
            "type": "object",
            "properties": {
                "en": {
                    "type": "string"
                }
            },
            "required": [
                "en"
            ],
            "additionalProperties": {
                "type": "string"
            }
        },
        "BotTimeControlSystems": {
            "type": "string",
            "enum": [
                "fischer",
                "byoyomi",
                "simple"
            ]
        },
        "TimeControlRanges": {
            "type": "object",
            "properties": {
                "per_move_time_range": {
                    "type": "array",
                    "items": {
                        "type": "number"
                    },
                    "minItems": 2,
                    "maxItems": 2,
                    "description": "Range of acceptable times per move. This is:   - The period time in byo-yomi   - The time increment and minimum move time in Fischer   - The time per move in simple time",
                    "default": "[10, 300] for live, [43200, 259200] for correspondence"
                },
                "main_time_range": {
                    "type": "array",
                    "items": {
                        "type": "number"
                    },
                    "minItems": 2,
                    "maxItems": 2,
                    "description": "Range of acceptable main times in seconds. This is only applicable for byo-yomi",
                    "default": "[0, 3600] for live games, [0, 86400] for correspondence games"
                },
                "periods_range": {
                    "type": "array",
                    "items": {
                        "type": "number"
                    },
                    "minItems": 2,
                    "maxItems": 2,
                    "description": "Range of acceptable number of periods. This is only applicable for byo-yomi",
                    "default": [
                        1,
                        10
                    ]
                },
                "concurrent_games": {
                    "type": "number",
                    "description": "Concurrent games to allow for this speed bracket",
                    "default": "1, 3, 500 for blitz, live, correspondence respectively"
                }
            },
            "required": [
                "per_move_time_range",
                "main_time_range",
                "periods_range",
                "concurrent_games"
            ],
            "additionalProperties": false
        }
    }
}